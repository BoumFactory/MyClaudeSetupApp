% Nom du fichier : bfcours-environments.sty
\ProvidesPackage{bfcours-mathsCommands}[02/10/2025 v1.0 Macros maths pour bfcours]

\providecommand{\R}{\mathbb{R}}
\providecommand{\N}{\mathbb{N}}
\providecommand{\Q}{\mathbb{Q}}
\providecommand{\Z}{\mathbb{Z}}
\providecommand{\D}{\mathbb{D}}

%Commande pour les coordonnées d'un point, nommé ou non.
\newcommand{\Coordonnees}[3][]{%
    #1\left(
    \tcbox[on line, boxsep=1pt, left=1pt, right=1pt, top=1pt, bottom=1pt,
           colback=gray!15, colframe=gray!15, arc=2pt]{$#2$};%
    \tcbox[on line, boxsep=1pt, left=1pt, right=1pt, top=1pt, bottom=1pt,
           colback=gray!15, colframe=gray!15, arc=2pt]{$#3$}%
    \right)
  }

  
% Macros pour de beauc crochets
\newcommand{\CrochetGSize}[1][\normalsize] {%
\begin{tikzpicture}[baseline]%
{#1 \draw  (0.46ex,1.84ex)--(0ex,1.84ex)--(0ex,-0.46ex)--(0.46ex,-0.46ex);%
%\draw  (0.07,0.28)--(0,0.28)--(0,-0.07)--(0.07,-0.07);%
}%
\end{tikzpicture}}

\newcommand{\CrochetDSize}[1][\normalsize] {%
\begin{tikzpicture}[baseline]%
{#1 \draw  (-0.46ex,1.84ex)--(0ex,1.84ex)--(0ex,-0.46ex)--(-0.46ex,-0.46ex) (0.197ex,0ex);%
%\draw  (-0.07,0.28)--(0,0.28)--(0,-0.07)--(-0.07,-0.07) (0.03,0);%
}%
\end{tikzpicture}}

\newcommand{\CrochetG}[1][\normalsize]{%
\ifmmode%
\mathchoice%
{\CrochetGSize}% \dispalystyle
{\CrochetGSize}% \textstyle
{\CrochetGSize[\scriptsize]}% \scriptstyle
{\CrochetGSize[\tiny]}% \scriptscriptstyle
\else \CrochetGSize[#1]%
\fi}

\newcommand{\CrochetD}[1][\normalsize]{%
\ifmmode%
\mathchoice{\CrochetDSize}{\CrochetDSize}{\CrochetDSize[\scriptsize]}{\CrochetDSize[\tiny]}%
\else \CrochetDSize[#1]%
\fi}
% fin ajout dans preambule
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% commande \intervalle[forme]{borneInf}{borneSup}
% forme : la structure de l'intervalle. chaine de caractères. valeurs possibles : ff,oo,fo,of,
\newcommand{\intervalle}[3][ff]{%
    \ifstrequal{#1}{ff}{%
        \CrochetG\,#2\,;\,#3\,\CrochetD%
    }{%
        \ifstrequal{#1}{oo}{%
            \CrochetD\,#2\,;\,#3\,\CrochetG%
        }{%
            \ifstrequal{#1}{fo}{%
                \CrochetG\,#2\,;\,#3\,\CrochetG%
            }{%
                \ifstrequal{#1}{of}{%
                    \CrochetD\,#2\,;\,#3\,\CrochetD%
                }{%
                    \PackageError{bfcours-mathsCommands}{Option invalide '#1' pour \string\intervalle - Valeurs possibles : ff, oo, fo, of}{}%
                }%
            }%
        }%
    }%
}
% \intervalle[of]{3}{5} -> \CrochetD 3 ; 5 \CrochetD  (]3; 5])
% \intervalle[ff]{3}{5} -> \CrochetG 3 ; 5 \CrochetD  ([3; 5])
% \intervalle[oo]{3}{5} -> \CrochetD 3 ; 5 \CrochetG  (]3; 5[)
% \intervalle[fo]{3}{5} -> \CrochetG 3 ; 5 \CrochetG  ([3; 5[)
% en effet, mes commandse Crochet sont des crochets mieux gérés en taille, et crochet d est tourné vers la gauche, crochet g est tourné vers la droite.

\newcommand{\Rep}{\left(O \, ;\, I \, ; \, J \right)}

\newcommand{\Vecteur}[1]{\overrightarrow{#1}} 

\tikzset{
    % ===== STYLES EXISTANTS =====
    quadrillage/.style={help lines, gray!40},
    epais/.style={thick, line width=1.2pt},
    axe/.style={->, >=stealth, thick, black},
    % Points avec croix droites visibles
    point/.style={cross out, draw, minimum size=5pt, line width=0.8pt, inner sep=0pt},
    point correction/.style={cross out, draw, minimum size=5pt, line width=1.2pt, inner sep=0pt,red},
    % Segments standard
    segment/.style={thick},
    % Vecteurs avec flèches
    vecteur/.style={->, >=stealth, thick},
    % Couleurs standard pour différencier
    couleur1/.style={blue},
    couleur2/.style={red},
    couleur3/.style={green!60!black},
    prop/.style={blue!60!cyan},
    % Labels de points
    label point/.style={font=\normalsize, inner sep=2pt},
    % Style général qui regroupe tout
    general/.style={point, segment, couleur1},
    %
    % ===== NOUVEAUX STYLES AJOUTÉS =====
    % Cercles
    cercle/.style={draw, thick},
    cercle epais/.style={draw, line width=1.2pt},
    cercle pointille/.style={draw, thick, dashed},
    % Angles
    angle/.style={draw, thick},
    angle droit/.style={draw, thick},
    % Codages géométriques
    codage segment/.style={decoration={markings, mark=at position 0.5 with {\draw[-] (0,-2pt) -- (0,2pt);}}, postaction={decorate}},
    codage segment double/.style={decoration={markings, mark=at position 0.5 with {\draw[-] (-1pt,-2pt) -- (-1pt,2pt); \draw[-] (1pt,-2pt) -- (1pt,2pt);}}, postaction={decorate}},
    codage segment triple/.style={decoration={markings, mark=at position 0.5 with {\draw[-] (-2pt,-2pt) -- (-2pt,2pt); \draw[-] (0,-2pt) -- (0,2pt); \draw[-] (2pt,-2pt) -- (2pt,2pt);}}, postaction={decorate}},
    % Médiatrice / Bissectrice
    mediatrice/.style={thick, dashed, gray},
    bissectrice/.style={thick, dotted, blue!60},
    % Hauteur / Médiane
    hauteur/.style={thick, dotted, red!60},
    mediane/.style={thick, dotted, green!60!black},
}

% ===== COMMANDES EXISTANTES =====
\newcommand{\XAxe}[3]{
    \draw[->, thick] (#1-0.5,0) -- (#2+0.5,0) node[right] {$x$};
    \foreach \x in {#3} {
        \draw (\x,0.1) -- (\x,-0.1) node[below] {$\x$};
    }
}
\newcommand{\YAxe}[3]{
    \draw[->, thick] (0,#1-0.5) -- (0,#2+0.5) node[right] {$y$};
    \foreach \y in {#3} {
        \draw (0.1,\y) -- (-0.1,\y) node[left] {$\y$};
    }
}
\newcommand{\origine}{
    \fill (0,0) circle (2pt) node[below left] {O};
}
\newcommand{\point}[4]{
    \node[point] (#3-point) at (#1,#2) {};
    \node[label point,#4=2mm of #3-point] {#3};
}
\newcommand{\pointCorrection}[4]{
    \node[point correction] (#3-point) at (#1,#2) {};
    \node[label point,#4=2mm of #3-point] {#3};
}

% ===== NOUVELLES COMMANDES AJOUTÉES =====
% Angle droit (marque)
% Usage: \angleDroit[orientation]{sommet}{taille}
% orientation (optionnel, défaut=1) :
%   1 = en haut à droite (0°)
%   2 = en haut à gauche (90°)
%   3 = en bas à gauche (180°)
%   4 = en bas à droite (270°)
% sommet : coordonnées du sommet de l'angle droit
% taille : taille du symbole (ex: 0.3)
\newcommand{\angleDroit}[3][1]{
    \ifcase#1\relax
        % Cas 0 (ne devrait pas arriver)
        \draw (#2) -- ++(0:#3) -- ++(90:#3) -- ++(180:#3);
    \or
        % Cas 1: en haut à droite (0°)
        \draw (#2) -- ++(0:#3) -- ++(90:#3) -- ++(180:#3);
    \or
        % Cas 2: en haut à gauche (90°)
        \draw (#2) -- ++(90:#3) -- ++(180:#3) -- ++(270:#3);
    \or
        % Cas 3: en bas à gauche (180°)
        \draw (#2) -- ++(180:#3) -- ++(270:#3) -- ++(0:#3);
    \or
        % Cas 4: en bas à droite (270°)
        \draw (#2) -- ++(270:#3) -- ++(0:#3) -- ++(90:#3);
    \fi
}


 % \affMonome{coeff}{degré} : 3x², x, -x, 5
  \newcommand{\affMonome}[2]{%
    \ifnum#2=0 \num{#1}\else
      \ifnum#1=1 x\ifnum#2>1^{#2}\fi%
      \else\ifnum#1=-1 -x\ifnum#2>1^{#2}\fi%
      \else\num{#1}x\ifnum#2>1^{#2}\fi\fi\fi\fi}

  % \affBinome{a}{b} : 2x-3, x+5
  \newcommand{\affBinome}[2]{\affMonome{#1}{1}\ifnum#2<0\num{#2}\else+\num{#2}\fi}

  % \affBinomeColor{a}{b}{col1}{col2}
  \newcommand{\affBinomeColor}[4]{{\color{#3}\affMonome{#1}{1}}\ifnum#2<0{\color{#4}\num{#2}}\else+{\color{#4}\num{#2}}\fi}

  % \affSigne{n} : +5 ou -3
  \newcommand{\affSigne}[1]{\ifnum#1<0\num{#1}\else+\num{#1}\fi}

  % \affTermeSigne{coeff}{var}{couleur}
  \newcommand{\affTermeSigne}[3]{\ifnum#1<0{\color{#3}\num{#1}#2}\else{\color{#3}+\num{#1}#2}\fi}

  % \affPolyDeux{a}{b}{c} : 5x²-x-4
  \newcommand{\affPolyDeux}[3]{%
    \affMonome{#1}{2}%
    \ifnum#2=0\else\ifnum#2=1 +x\else\ifnum#2=-1 -x\else\ifnum#2<0\num{#2}x\else+\num{#2}x\fi\fi\fi\fi%
    \ifnum#3=0\else\ifnum#3<0\num{#3}\else+\num{#3}\fi\fi}
\endinput